<div class="actions-container">
    <div class="header">
        <h1>Ações</h1>
    </div>
    <div class="scroll-content">

        <!-- MATCHES SECTION -->
        <section class="section">
            <h2 class="section-title" [class.faded]="(matches$ | async)?.length === 0">Matches <span class="count"
                    *ngIf="(matches$ | async)?.length">{{ (matches$ |
                    async)?.length }}</span></h2>

            <div class="grid-container">
                <div class="grid-item" *ngFor="let match of (matches$ | async)" (click)="handleMatchClick(match)">
                    <div class="card-image">
                        <img [src]="match.photo || 'assets/placeholder.jpg'" [alt]="match.name">
                        <div class="overlay-info">
                            <span class="name">{{ match.name }}</span>
                            <span class="age" *ngIf="match.age">, {{ match.age }}</span>
                        </div>
                        <div class="super-like-badge" *ngIf="match.isSuperLike">
                            <i class="fas fa-star"></i>
                        </div>
                        <!-- NO Badge for regular matches as requested -->
                    </div>
                </div>
                <div class="empty-state" *ngIf="(matches$ | async)?.length === 0">
                </div>
            </div>
        </section>

        <!-- SUPER LIKES SECTION -->
        <section class="section">
            <h2 class="section-title" [class.faded]="(superLikes$ | async)?.length === 0">Super Likes <span
                    class="count" *ngIf="(superLikes$ | async)?.length">{{
                    (superLikes$ | async)?.length }}</span></h2>
            <div class="grid-container">
                <div class="grid-item super-like-item" *ngFor="let like of (superLikes$ | async)"
                    (click)="handleSuperLikeClick(like)">
                    <div class="card-image">
                        <img [src]="like.photo || 'assets/placeholder.jpg'" [alt]="like.name">
                        <div class="overlay-info">
                            <span class="name">{{ like.name }}</span>
                        </div>
                        <div class="super-like-badge">
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <div class="empty-state" *ngIf="(superLikes$ | async)?.length === 0">
                </div>
            </div>
        </section>

        <!-- RECEIVED LIKES SECTION -->
        <section class="section">
            <h2 class="section-title" [class.faded]="!loadingLikes && receivedLikes.length === 0">Likes Recebidos <span
                    class="count" *ngIf="receivedLikes.length">{{
                    receivedLikes.length }}</span></h2>
            <div class="grid-container">
                <div class="grid-item like-item" *ngFor="let like of receivedLikes" (click)="handleLikeClick(like)">
                    <div class="card-image" [class.blurred]="!isPremium">
                        <img [src]="like.photo || 'assets/placeholder.jpg'" [alt]="like.name">

                        <div class="overlay-info" *ngIf="isPremium">
                            <span class="name">{{ like.name }}</span>
                            <span class="age" *ngIf="like.age">, {{ like.age }}</span>
                        </div>

                        <!-- Central Heart (Visible for both Premium and Non-Premium as main indicator) -->
                        <div class="central-heart">
                            <i class="fas fa-heart"></i>
                        </div>
                    </div>
                </div>

                <div class="empty-state" *ngIf="!loadingLikes && receivedLikes.length === 0">
                </div>

                <!-- Skeleton Loading -->
                <div class="grid-container" *ngIf="loadingLikes">
                    <div class="grid-item skeleton" *ngFor="let i of [1,2,3]"></div>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- Floating Premium CTA -->
<div class="premium-floating-cta" *ngIf="!isPremium && (receivedLikes.length > 0 || (superLikes$ | async)?.length)">
    <div class="cta-content">
        <p>Descubra quem curtiu você!</p>
        <button class="btn-upgrade" (click)="goToPlans()">SEJA PREMIUM</button>
    </div>
</div>